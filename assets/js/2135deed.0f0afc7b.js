"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6102],{2325:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>r,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"tutorial-basics/configurations","title":"Configuration","description":"Under the hood, we are using config library to help with managing configuration.","source":"@site/docs/tutorial-basics/configurations.md","sourceDirName":"tutorial-basics","slug":"/tutorial-basics/configurations","permalink":"/pashmak/docs/tutorial-basics/configurations","draft":false,"unlisted":false,"editUrl":"https://github.com/devbro1/pashmak/blob/master/docs/docs/tutorial-basics/configurations.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Installation","permalink":"/pashmak/docs/tutorial-basics/installation"},"next":{"title":"Directory structure","permalink":"/pashmak/docs/tutorial-basics/directory-structure"}}');var i=t(2540),s=t(3023);const r={sidebar_position:2},a="Configuration",c={},d=[{value:"More configurations",id:"more-configurations",level:2},{value:"custom feature configurations",id:"custom-feature-configurations",level:2},{value:".env AKA dotenv",id:"env-aka-dotenv",level:2},{value:"Force config to exists",id:"force-config-to-exists",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"configuration",children:"Configuration"})}),"\n",(0,i.jsxs)(n.p,{children:["Under the hood, we are using ",(0,i.jsx)(n.a,{href:"https://www.npmjs.com/package/config",children:"config"})," library to help with managing configuration."]}),"\n",(0,i.jsxs)(n.p,{children:["To start place your related configs in ",(0,i.jsx)(n.code,{children:"config/default.ts"})," file and it will be autoloaded."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:'import config from "config";\n\nconsole.log(config.get("databases"));\n'})}),"\n",(0,i.jsx)(n.p,{children:"one major behavior is that if you request a config that is not defined, it will throw an error. It is by design to make sure there is no typo and all configs are defined correctly."}),"\n",(0,i.jsx)(n.p,{children:"it may become needed to load some values from envvars. to do this, use this approach:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"// config/default.ts\nexport default {\n  port: process.env.PORT || 3000,\n};\n"})}),"\n",(0,i.jsx)(n.h2,{id:"more-configurations",children:"More configurations"}),"\n",(0,i.jsxs)(n.p,{children:["There can be multiple features that depends on configurations to run successfully such as database, file, caching, and etc. To make maintaining configurations for each of these features, it is strongly suggested to keep their configurations in separate files and import(",(0,i.jsx)(n.code,{children:"require()"}),") them into default config. the main configuration for each of these services must be named ",(0,i.jsx)(n.code,{children:"default"}),". for example, if your system is connecting to 3 different databases, the main database must be labelled default, the second and third, can be given any name of your own choosing."]}),"\n",(0,i.jsx)(n.h2,{id:"custom-feature-configurations",children:"custom feature configurations"}),"\n",(0,i.jsxs)(n.p,{children:["If you decide to create your own custom feature, for example a payment processing, that needs configuration, you can create your own ",(0,i.jsx)(n.code,{children:"XYZ.ts"})," file similar to:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// payment.ts\nexport default {\n  provider: 'stripe',\n  ....\n}\n\n//optional if you are planning to connect to more than one service\nexport const secondary_payment_system = {\n  ?????\n}\n\n//default.ts\nexport default {\n  ?????\n  payment_system: require('./payment');\n};\n\n// somewhere else in your code\nimport config from 'config';\n\n\nif(config.get('payment_system.default.provider') === 'stripe') {\n  // standard payment processing\n}\nelse if(config.get('payment_system.secondary_payment_system') === 'bitcoin') {\n // backup payment processing\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"env-aka-dotenv",children:".env AKA dotenv"}),"\n",(0,i.jsx)(n.p,{children:"there is also .env support in case you want to load some configs that way. please note, you will still need to add the specific configs you want to default.js to be able to access the values."}),"\n",(0,i.jsx)(n.h2,{id:"force-config-to-exists",children:"Force config to exists"}),"\n",(0,i.jsx)(n.p,{children:"some configs are essential and you want to stop the process without them. you can do this:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:'import { getEnv } from "neko-helper/src";\n\nexport default {\n  https_port: getEnv("HTTPS_PORT", 443),\n  port: getEnv("PORT"),\n  ssh_port: getEnv("SSH_PORT", undefined),\n};\n'})}),"\n",(0,i.jsxs)(n.p,{children:["if ",(0,i.jsx)(n.code,{children:"PORT"})," is not defined, an error is thrown and stopping the process entirely before it starts."]}),"\n",(0,i.jsxs)(n.p,{children:["if ",(0,i.jsx)(n.code,{children:"HTTPS_PORT"})," is not defined, it will use default value of 443 and will not throw an error."]}),"\n",(0,i.jsxs)(n.p,{children:["if ",(0,i.jsx)(n.code,{children:"ssh_port"})," is not defined, it will use default value of ",(0,i.jsx)(n.code,{children:"undefined"})," and will NOT throw an error."]})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},3023:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>a});var o=t(3696);const i={},s=o.createContext(i);function r(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);