"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[8576],{3023:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>t});var r=i(3696);const a={},s=r.createContext(a);function o(e){const n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),r.createElement(s.Provider,{value:n},e.children)}},3207:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>t,default:()=>m,frontMatter:()=>o,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"going-deeper/email","title":"Email","description":"Pashmak provides a simple way to send emails using different drivers.","source":"@site/docs/going-deeper/email.md","sourceDirName":"going-deeper","slug":"/going-deeper/email","permalink":"/pashmak/docs/going-deeper/email","draft":false,"unlisted":false,"editUrl":"https://github.com/devbro1/pashmak/blob/master/docs/docs/going-deeper/email.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Context","permalink":"/pashmak/docs/going-deeper/context"},"next":{"title":"File Storage","permalink":"/pashmak/docs/going-deeper/file-storage"}}');var a=i(2540),s=i(3023);const o={sidebar_position:2},t="Email",l={},d=[{value:"Configuration",id:"configuration",level:2},{value:"Mailable",id:"mailable",level:2},{value:"Available Providers",id:"available-providers",level:2},{value:"Creating a custom provider",id:"creating-a-custom-provider",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"email",children:"Email"})}),"\n",(0,a.jsx)(n.p,{children:"Pashmak provides a simple way to send emails using different drivers."}),"\n",(0,a.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:'// app/config/email.ts\nexport default {\n  default: {\n    provider: "SES",\n    config: {\n      ???\n    } as SESMailerConfig,\n  },\n};\n'})}),"\n",(0,a.jsx)(n.h2,{id:"mailable",children:"Mailable"}),"\n",(0,a.jsxs)(n.p,{children:["To send emails, you need to create a mailable class that implements the ",(0,a.jsx)(n.code,{children:"Mailable"})," interface."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:'import { Mailable } from "@devbro/pashmak/mailer";\nimport { config } from "@devbro/pashmak/config";\n\nexport class PasswordResetMail implements Mailable {\n  from: string = config.get("mailer.default.default_from"); // sender email address\n  to: string | string[]; // recipient email address(es)\n  cc?: string | string[]; // optional cc email address(es)\n  bcc?: string | string[]; // optional bcc email address(es)\n  subject: string = "Hello There!"; // email subject\n\n  // must return plain text content of the email\n  async getTextContent(): Promise<string> {\n    return `Hello ${this.userName}`;\n  }\n\n  // must return HTML content of the email\n  async getHtmlContent(): Promise<string> {\n    return `Hello ${this.userName},<br/>`;\n  }\n}\n'})}),"\n",(0,a.jsx)(n.p,{children:"Once you have your mailable object you can send it using the mailer facade."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:'import { mailer } from "@devbro/pashmak/facades";\n\nconst mail = new PasswordResetMail(????);\nawait mailer().send(mail);\n'})}),"\n",(0,a.jsx)(n.h2,{id:"available-providers",children:"Available Providers"}),"\n",(0,a.jsx)(n.p,{children:"Pashmak comes with built-in support for the following email providers:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"SMTP: Uses nodemailer with SMTP transport."}),"\n",(0,a.jsx)(n.li,{children:"SES: Uses AWS SES service."}),"\n",(0,a.jsx)(n.li,{children:"SendGrid: Uses SendGrid service."}),"\n",(0,a.jsx)(n.li,{children:"Mailgun: Uses Mailgun service."}),"\n",(0,a.jsx)(n.li,{children:"Postmark: Uses Postmark service."}),"\n",(0,a.jsx)(n.li,{children:"ProtonMail: Uses ProtonMail service."}),"\n",(0,a.jsx)(n.li,{children:"Mailchimp Transactional: Uses Mailchimp Transactional service."}),"\n",(0,a.jsx)(n.li,{children:"Function Provider: Allows you to define your own function."}),"\n",(0,a.jsx)(n.li,{children:"Memory Provider: a provider that stores emails in memory (useful for testing)."}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"creating-a-custom-provider",children:"Creating a custom provider"}),"\n",(0,a.jsxs)(n.p,{children:["Let's say you want to create a custom provider for your email service. You can do so by creating a class that implements the MailProvider interface.\nthen register the provider with ",(0,a.jsx)(n.code,{children:"MailerProviderFactory"})," then reference it in your config:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:'import { Mailable } from "../Mailable.mjs";\nimport { MailerProvider } from "../MailerProvider.mjs";\nimport { MeowProviderConfig } from "./MeowProviderConfig.mjs";\n\nexport class MeowProvider implements MailerProvider {\n  constructor(private config: MeowProviderConfig) {\n    ???\n  }\n  setDefaultFrom(from: string) {\n    ???\n  }\n\n  async sendMail(mail: Mailable) {\n    ???\n  }\n}\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:'// initialize.ts\n\nimport { MailerProviderFactory } from "@devbro/pashmak/factories";\n\nMailerProviderFactory.register("MeowMailer", (config) => {\n  return new MeowProvider(config);\n});\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"// app/config/email.ts\nimport { MeowProviderConfig } from \"./MeowProviderConfig.mjs\";\n\nexport default {\n  mailer: {\n    default: {\n      provider: 'MeowMailer',\n      config: { ??? } as MeowProviderConfig, /* optional config object that will be passed to your provider */\n    },\n  },\n};\n"})})]})}function m(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}}}]);