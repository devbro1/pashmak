"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[5882],{3023:(e,t,r)=>{r.d(t,{R:()=>a,x:()=>o});var n=r(3696);const s={},i=n.createContext(s);function a(e){const t=n.useContext(i);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),n.createElement(i.Provider,{value:t},e.children)}},8007:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>c,frontMatter:()=>a,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"going-deeper/file-storage","title":"File Storage","description":"Pashmak uses neko-storage module to manage files. This is a unified file storage library that supports multiple storage providers while providing a simple intermeow interface to manage files.","source":"@site/docs/going-deeper/file-storage.md","sourceDirName":"going-deeper","slug":"/going-deeper/file-storage","permalink":"/pashmak/docs/going-deeper/file-storage","draft":false,"unlisted":false,"editUrl":"https://github.com/devbro1/pashmak/blob/master/docs/docs/going-deeper/file-storage.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Email","permalink":"/pashmak/docs/going-deeper/email"},"next":{"title":"Helpers","permalink":"/pashmak/docs/going-deeper/helper"}}');var s=r(2540),i=r(3023);const a={sidebar_position:4},o="File Storage",l={},d=[{value:"Configuration",id:"configuration",level:2},{value:"Available Methods",id:"available-methods",level:2},{value:"metadata(path)",id:"metadatapath",level:3},{value:"getString(path), getJson(path), getBuffer(path), getStream(path)",id:"getstringpath-getjsonpath-getbufferpath-getstreampath",level:3},{value:"Available Providers",id:"available-providers",level:2},{value:"Registering your own Provider",id:"registering-your-own-provider",level:2}];function g(e){const t={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"file-storage",children:"File Storage"})}),"\n",(0,s.jsxs)(t.p,{children:["Pashmak uses ",(0,s.jsx)(t.code,{children:"neko-storage"})," module to manage files. This is a unified file storage library that supports multiple storage providers while providing a simple intermeow interface to manage files."]}),"\n",(0,s.jsx)(t.h2,{id:"configuration",children:"Configuration"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:'// config/storage.ts\nimport path from "path";\nimport os from "os";\n\nexport default {\n  default: {\n    provider: "local",\n    config: {\n      basePath: path.join(os.tmpdir(), "/app-storage/"),\n    },\n  },\n  temp: {\n    provider: "local",\n    config: {\n      basePath: path.join(os.tmpdir(), `temp_dir/${randomUUID()}`),\n    },\n  },\n  qa_s3: {\n    provider: "s3",\n    config: {\n      bucket: "qa-team-bucket",\n    },\n  },\n};\n'})}),"\n",(0,s.jsx)(t.p,{children:"You can then access your storage drivers:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:'import { storage } from "@devbro/pashmak/facades";\n\nawait storage().getString("testfile.txt"); // uses default\nawait storage("temp").getString("testfile.txt"); // uses temp file system\nawait storage("qa_s3").getString("testfile.txt"); // uses qa_s3 storage (AWS-S3)\n'})}),"\n",(0,s.jsx)(t.h2,{id:"available-methods",children:"Available Methods"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"storage().exists(path: string): Promise<boolean>"}),": Check if a file exists in the storage."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"storage().put(path: string, content: string | object | Stream | Buffer): Promise<void>"}),": Add or override a file in the storage."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"storage().metadata(path: string): Promise<object>"}),": Get metadata of a file."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"storage().getString(path: string): Promise<string>"}),": Get file content as a string."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"storage().getJson(path: string): Promise<object>"}),": Get file content as a JSON object."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"storage().getBuffer(path: string): Promise<Buffer>"}),": Get file content as a Buffer."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"storage().getStream(path: string): Promise<Stream>"}),": Get file content as a Stream."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"storage().delete(path: string): Promise<boolean>"}),": Delete a file from the storage."]}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"metadatapath",children:"metadata(path)"}),"\n",(0,s.jsx)(t.p,{children:"sometime you need details of the file"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:'await storage().metadata("test.jpg");\n'})}),"\n",(0,s.jsx)(t.p,{children:"the return will look like:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:'{\n    "size": 97511,\n    "mimeType": "image/jpeg",\n    "lastModifiedDate": "2025-05-25T22:01:27.625Z"\n}\n'})}),"\n",(0,s.jsx)(t.p,{children:"depending on the driver you may get different metadata fields."}),"\n",(0,s.jsx)(t.h3,{id:"getstringpath-getjsonpath-getbufferpath-getstreampath",children:"getString(path), getJson(path), getBuffer(path), getStream(path)"}),"\n",(0,s.jsx)(t.p,{children:"Depending on your need a few different methods are provided to help getting the file content."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:'await storage().getString("test.txt"); // string\nawait storage().getJson("test.json"); // json object\nawait storage().getBuffer("test.jpg"); // Buffer\nawait storage().getStream("test.jpg"); // stream\n\n// to send stream as a response\n(await storage().getStream("test.jpg")).pipe(res);\n'})}),"\n",(0,s.jsx)(t.h2,{id:"available-providers",children:"Available Providers"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"local"}),": Store files on local file system."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"s3"}),": Store files on AWS S3."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"gcs"}),": Store files on Google Cloud Storage."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"azure"}),": Store files on Azure Blob Storage."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"ftp"}),": Store files on FTP and FTPS servers."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"sftp"}),": Store files on SFTP servers."]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"registering-your-own-provider",children:"Registering your own Provider"}),"\n",(0,s.jsx)(t.p,{children:"If you ever need to add your own provider follow this sample code:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:"import { StorageProviderInterface, Storage, StorageProviderFactory } from \"@devbro/neko-storage\";\n\nclass MyStorageProvider implements StorageProviderInterface {\n  ???\n}\n\nStorageProviderFactory.register('MyStorageName', (opt) => {\n  return new AWSS3StorageProvider(opt);\n});\n"})})]})}function c(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(g,{...e})}):g(e)}}}]);